{# templates/home/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Accueil - Plateforme Universitaire{% endblock %}

{% block body %}
    <!-- Page content START -->
    <section class="pt-0">
        <div class="container">
            <!-- Hero section START -->
            <div class="row g-4 align-items-center">
                <div class="col-md-6">
                    <!-- Title -->
                    <h1 class="display-5 mb-3">Bienvenue sur la Plateforme Universitaire</h1>
                    <p class="lead mb-0">
                        Une solution complète pour la gestion des étudiants, enseignants et administrateurs.
                        Accédez à votre espace personnel et gérez vos informations académiques en toute simplicité.
                    </p>
                    <!-- Buttons -->
                    <div class="mt-4">
                        {% if current_user %}
                            {% if is_admin %}
                                <a href="{{ path('app_administrateur_dashboard') }}" class="btn btn-primary mb-0">Accéder au Panel Admin</a>
                            {% elseif is_enseignant %}
                                <a href="{{ path('app_enseignant_dashboard') }}" class="btn btn-primary mb-0">Accéder à mon Espace</a>
                            {% elseif is_etudiant %}
                                <a href="{{ path('app_etudiant_dashboard') }}" class="btn btn-primary mb-0">Accéder à mon Espace</a>
                            {% endif %}
                        {% else %}
                            <!-- SIMPLE FIX: Always show login button when not logged in -->
                            <a href="{{ path('app_login') }}" class="btn btn-primary mb-0">Se connecter</a>
                        {% endif %}
                    </div>
                </div>
                <div class="col-md-6">
                    <!-- Image -->
                    <img src="{{ asset('assets/images/element/01.svg') }}" alt="hero-image" class="img-fluid">
                </div>
            </div>
            <!-- Hero section END -->

            <!-- Stats section START -->
            <div class="row g-4 mt-5">
                <div class="col-12">
                    <h3 class="mb-4">Statistiques de la plateforme</h3>
                </div>

                <!-- Stat 1 -->
                <div class="col-md-4">
                    <div class="card card-body bg-primary bg-opacity-10 border border-primary border-opacity-25 p-4 h-100">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h2 class="mb-0 fw-bold">{{ stats.etudiants }}</h2>
                                <span class="mb-0 h6 fw-light">Étudiants</span>
                            </div>
                            <div class="icon-lg rounded-circle bg-primary text-white mb-0">
                                <i class="fas fa-user-graduate fa-fw"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stat 2 -->
                <div class="col-md-4">
                    <div class="card card-body bg-success bg-opacity-10 border border-success border-opacity-25 p-4 h-100">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h2 class="mb-0 fw-bold">{{ stats.enseignants }}</h2>
                                <span class="mb-0 h6 fw-light">Enseignants</span>
                            </div>
                            <div class="icon-lg rounded-circle bg-success text-white mb-0">
                                <i class="fas fa-user-tie fa-fw"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stat 3 -->
                <div class="col-md-4">
                    <div class="card card-body bg-purple bg-opacity-10 border border-purple border-opacity-25 p-4 h-100">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h2 class="mb-0 fw-bold">{{ stats.administrateurs }}</h2>
                                <span class="mb-0 h6 fw-light">Administrateurs</span>
                            </div>
                            <div class="icon-lg rounded-circle bg-purple text-white mb-0">
                                <i class="fas fa-user-cog fa-fw"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Stats section END -->

            <!-- Features section START -->
            <div class="row g-4 mt-5">
                <div class="col-12">
                    <h3 class="mb-4">Nos fonctionnalités</h3>
                </div>

                <!-- Feature 1 -->
                <div class="col-md-4">
                    <div class="card border h-100">
                        <div class="card-body text-center p-4">
                            <div class="icon-xl bg-primary bg-opacity-10 text-primary rounded-circle mb-3 mx-auto">
                                <i class="fas fa-graduation-cap fa-fw"></i>
                            </div>
                            <h5 class="card-title">Gestion académique</h5>
                            <p class="card-text">
                                Suivez votre progression académique, consultez vos notes et téléchargez vos documents.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Feature 2 -->
                <div class="col-md-4">
                    <div class="card border h-100">
                        <div class="card-body text-center p-4">
                            <div class="icon-xl bg-success bg-opacity-10 text-success rounded-circle mb-3 mx-auto">
                                <i class="fas fa-book fa-fw"></i>
                            </div>
                            <h5 class="card-title">Ressources pédagogiques</h5>
                            <p class="card-text">
                                Accédez à une bibliothèque de ressources pédagogiques et supports de cours.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Feature 3 -->
                <div class="col-md-4">
                    <div class="card border h-100">
                        <div class="card-body text-center p-4">
                            <div class="icon-xl bg-warning bg-opacity-10 text-warning rounded-circle mb-3 mx-auto">
                                <i class="fas fa-comments fa-fw"></i>
                            </div>
                            <h5 class="card-title">Communication</h5>
                            <p class="card-text">
                                Communiquez facilement avec vos enseignants et collègues étudiants.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Features section END -->

            <!-- Login Access Section START -->
            <div class="row g-4 mt-5">
                <div class="col-12">
                    <div class="card bg-light border-0">
                        <div class="card-body p-5 text-center">
                            <h3 class="mb-3">Accédez à votre compte</h3>
                            <p class="mb-4">
                                Connectez-vous pour accéder à toutes les fonctionnalités de la plateforme.
                            </p>
                            {% if not current_user %}
                                <a href="{{ path('app_login') }}" class="btn btn-primary btn-lg mb-0">
                                    <i class="fas fa-sign-in-alt me-2"></i>Se connecter
                                </a>
                                <p class="small mt-3 text-muted">
                                    Vous n'avez pas de compte ? <a href="#" onclick="alert('Pour créer un compte, contactez l\\'administration.'); return false;">Contactez l'administration</a>
                                </p>
                            {% else %}
                                <div class="alert alert-success mb-0">
                                    Vous êtes déjà connecté en tant que {{ current_user.email }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <!-- Login Access Section END -->

            <!-- Call to action START -->
            <div class="row g-4 mt-5">
                <div class="col-12">
                    <div class="card bg-primary bg-opacity-10 border-0">
                        <div class="card-body p-5 text-center">
                            <h3 class="mb-3">Prêt à commencer ?</h3>
                            <p class="mb-4">
                                Rejoignez notre communauté académique et bénéficiez de tous les avantages de notre plateforme.
                            </p>
                            <!-- SIMPLE FIX: Always show login button when not logged in -->
                            {% if not current_user %}
                                <a href="{{ path('app_login') }}" class="btn btn-primary mb-0">Se connecter maintenant</a>
                            {% else %}
                                <a href="#" class="btn btn-primary mb-0">Explorer les fonctionnalités</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <!-- Call to action END -->
        </div>
    </section>
    <!-- Page content END -->
{% endblock %}